[gd_scene load_steps=16 format=3 uid="uid://blyl7uokcly77"]

[ext_resource type="PackedScene" uid="uid://dke3fxq26hv5k" path="res://assets/blend_files/cinematic_enemy.blend" id="1_mk1ul"]
[ext_resource type="Script" path="res://src/actors/cinematics/cinematic_enemy.gd" id="2_adg2y"]
[ext_resource type="PackedScene" uid="uid://cien5ag7i3qtf" path="res://assets/blend_files/low_poly_katana.blend" id="3_51mnw"]
[ext_resource type="PackedScene" uid="uid://yi11ph1objce" path="res://src/objects/flaming_orb.tscn" id="4_na1k7"]
[ext_resource type="Script" path="res://addons/godot_state_charts/state_chart.gd" id="5_fxgv1"]
[ext_resource type="Script" path="res://addons/godot_state_charts/compound_state.gd" id="6_c1lto"]
[ext_resource type="Script" path="res://addons/godot_state_charts/atomic_state.gd" id="7_d2ip8"]
[ext_resource type="Script" path="res://addons/godot_state_charts/transition.gd" id="8_deeoo"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_anivt"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ic83x"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="SphereMesh" id="SphereMesh_apoih"]
material = SubResource("StandardMaterial3D_ic83x")
radius = 0.1
height = 0.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7pdr7"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="BoxMesh" id="BoxMesh_f2u70"]
material = SubResource("StandardMaterial3D_7pdr7")
size = Vector3(0.178, 0.481, 0.1)

[sub_resource type="BoxMesh" id="BoxMesh_cjhop"]
material = SubResource("StandardMaterial3D_7pdr7")
size = Vector3(0.136, 0.148, 0.1)

[sub_resource type="BoxMesh" id="BoxMesh_iulsx"]
material = SubResource("StandardMaterial3D_7pdr7")
size = Vector3(0.096, 0.175, 0.1)

[node name="CinematicEnemy" node_paths=PackedStringArray("state_chart", "animation_player", "flaming_orb") instance=ExtResource("1_mk1ul")]
script = ExtResource("2_adg2y")
state_chart = NodePath("StateChart")
animation_player = NodePath("AnimationPlayer")
flaming_orb = NodePath("Armature/GeneralSkeleton/FlamingOrbBoneAttachment3D/FlamingOrb")

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CylinderShape3D_anivt")
disabled = true

[node name="GeneralSkeleton" parent="Armature" index="0"]
bones/1/position = Vector3(-1.21964e-09, 1.14313, -0.013951)
bones/1/rotation = Quaternion(-0.00014314, -0.000118713, -0.00297233, 0.999996)
bones/2/rotation = Quaternion(0.000143139, 0.000118711, 0.00297234, 0.999996)
bones/5/rotation = Quaternion(0, 7.12971e-15, -4.16334e-16, 1)
bones/8/rotation = Quaternion(0.523925, 0.474871, 0.523925, -0.474871)
bones/9/rotation = Quaternion(0.131261, 0.985385, -0.101003, -0.0398049)
bones/10/rotation = Quaternion(-0.0802333, -0.75567, -0.275054, 0.588957)
bones/11/rotation = Quaternion(0.0480299, 0.615237, -0.0987176, 0.780661)
bones/12/rotation = Quaternion(0.00430152, 0.075522, 0.00315276, 0.99713)
bones/13/rotation = Quaternion(-0.110887, 0.778027, 0.260285, 0.560919)
bones/14/rotation = Quaternion(-0.0413671, 0.0619855, -0.0694302, 0.994799)
bones/15/rotation = Quaternion(0, 2.98023e-08, -2.98023e-08, 1)
bones/16/rotation = Quaternion(0.146232, 0.0905794, -0.0162653, 0.98496)
bones/17/rotation = Quaternion(0.0738071, -0.00524122, -0.0344616, 0.996663)
bones/18/rotation = Quaternion(0.0904398, -0.0104392, -0.0434863, 0.994897)
bones/20/rotation = Quaternion(0.169893, 0.151815, 0.0323167, 0.973162)
bones/21/rotation = Quaternion(0.195297, -0.02659, -0.0575169, 0.978695)
bones/22/rotation = Quaternion(0.117396, -0.0162832, -0.0345806, 0.992349)
bones/23/rotation = Quaternion(5.96046e-08, 0, 0, 1)
bones/24/rotation = Quaternion(0.138089, 0.180833, 0.0894199, 0.969657)
bones/25/rotation = Quaternion(0.285606, -0.0397839, -0.0536508, 0.956017)
bones/26/rotation = Quaternion(0.164516, -0.0232742, -0.0308791, 0.985616)
bones/27/rotation = Quaternion(-2.98023e-08, 2.98023e-08, 2.98023e-08, 1)
bones/28/rotation = Quaternion(0.241615, 0.179145, 0.00554314, 0.953676)
bones/29/rotation = Quaternion(0.291123, -0.0501692, -0.0679775, 0.952948)
bones/30/rotation = Quaternion(-0.0148645, -0.0143265, 0.00966109, 0.99974)
bones/31/rotation = Quaternion(1.49012e-08, 0, 2.98023e-08, 1)
bones/32/rotation = Quaternion(0.523924, -0.474872, -0.523924, -0.474872)
bones/33/rotation = Quaternion(-0.0769905, 0.991685, -0.100441, 0.0233475)
bones/34/rotation = Quaternion(-0.0459836, 0.743574, 0.242901, 0.621275)
bones/35/rotation = Quaternion(0.0394556, -0.614374, 0.103181, 0.781244)
bones/36/rotation = Quaternion(0.000572562, -0.0816411, -0.00764769, 0.996632)
bones/37/rotation = Quaternion(-0.121108, -0.769315, -0.257393, 0.572046)
bones/38/rotation = Quaternion(-0.0450207, -0.0520331, 0.07754, 0.994612)
bones/39/rotation = Quaternion(-2.98023e-08, 2.98023e-08, 0, 1)
bones/40/rotation = Quaternion(0.176345, -0.107466, 0.0260297, 0.978098)
bones/41/rotation = Quaternion(0.0747799, 0.00920342, 0.0342987, 0.996568)
bones/42/rotation = Quaternion(0.0380153, 0.00717437, 0.0180158, 0.999089)
bones/43/rotation = Quaternion(0, -1.49012e-08, 0, 1)
bones/44/rotation = Quaternion(0.159805, -0.18893, -0.0776428, 0.965784)
bones/45/rotation = Quaternion(0.217789, 0.0343138, 0.0436239, 0.974416)
bones/46/rotation = Quaternion(0.0387645, 0.00606567, 0.00776368, 0.9992)
bones/47/rotation = Quaternion(2.98023e-08, -2.98023e-08, 2.98023e-08, 1)
bones/48/rotation = Quaternion(0.276662, -0.206208, -0.000752568, 0.938582)
bones/49/rotation = Quaternion(0.184709, 0.029122, 0.0321991, 0.981834)
bones/50/rotation = Quaternion(0.0728789, 0.0119279, 0.0126206, 0.99719)
bones/51/rotation = Quaternion(0, 0, -5.96046e-08, 1)
bones/52/rotation = Quaternion(0.182132, -0.187501, -0.0577191, 0.963504)
bones/53/rotation = Quaternion(0.341046, 0.0628699, 0.0765946, 0.934809)
bones/54/rotation = Quaternion(0.0148709, 0.0149774, -0.000569493, 0.999777)
bones/56/rotation = Quaternion(-0.00481992, -0.0786365, 0.994572, -0.0679683)
bones/57/rotation = Quaternion(-0.000605699, 0.985383, 0.168412, 0.0256496)
bones/58/rotation = Quaternion(-0.0532072, 0.767514, -0.637574, 0.0398714)
bones/59/rotation = Quaternion(-2.10734e-08, 1, 2.98023e-08, 0)
bones/61/rotation = Quaternion(0.00686406, -0.0954794, 0.993489, 0.06177)
bones/62/rotation = Quaternion(0.000845169, 0.977587, 0.208095, -0.0319277)
bones/63/rotation = Quaternion(0.0549238, 0.78248, -0.619075, -0.0381453)
bones/64/rotation = Quaternion(0, 1, -2.98023e-08, 0)

[node name="KatanaBoneAttachment3D" type="BoneAttachment3D" parent="Armature/GeneralSkeleton" index="1"]
transform = Transform3D(-0.482593, -0.649615, 0.587456, 0.0942464, -0.705352, -0.702564, 0.870759, -0.283687, 0.401622, 0.797783, 1.67191, 0.0372552)
bone_name = "RightHand"
bone_idx = 35

[node name="low_poly_katana" parent="Armature/GeneralSkeleton/KatanaBoneAttachment3D" index="0" instance=ExtResource("3_51mnw")]
transform = Transform3D(-0.00382395, -0.0245554, -0.00272204, 0.0202638, -0.00154157, -0.0145603, 0.0141335, -0.00443349, 0.0201392, -0.142768, -0.0470836, 0.0787074)

[node name="FlamingOrbBoneAttachment3D" type="BoneAttachment3D" parent="Armature/GeneralSkeleton" index="2"]
transform = Transform3D(-0.470414, 0.652821, -0.593747, -0.108415, -0.7105, -0.695296, -0.875761, -0.262706, 0.405004, -0.801045, 1.67191, 0.0172692)
bone_name = "LeftHand"
bone_idx = 11

[node name="FlamingOrb" parent="Armature/GeneralSkeleton/FlamingOrbBoneAttachment3D" index="0" instance=ExtResource("4_na1k7")]
transform = Transform3D(1, 3.72532e-08, 1.9744e-06, -3.72529e-08, 1, -1.67639e-07, -1.9744e-06, 1.67639e-07, 1, 0.0340272, 0.00333089, 0.174684)
visible = false

[node name="Icosphere_002_0" parent="Armature/GeneralSkeleton/FlamingOrbBoneAttachment3D/FlamingOrb/Sketchfab_model/root/GLTF_SceneRootNode" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)

[node name="Icosphere_001_1" parent="Armature/GeneralSkeleton/FlamingOrbBoneAttachment3D/FlamingOrb/Sketchfab_model/root/GLTF_SceneRootNode" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)

[node name="LeftFootBoneAttachment3D" type="BoneAttachment3D" parent="Armature/GeneralSkeleton" index="3"]
transform = Transform3D(-1, 3.12598e-06, -1.30595e-06, -1.30653e-06, -3.8445e-06, 1, 3.13343e-06, 1, 3.7998e-06, -0.145152, 0.101341, 0.0325282)
bone_name = "LeftFoot"
bone_idx = 58

[node name="MeshInstance3D" type="MeshInstance3D" parent="Armature/GeneralSkeleton/LeftFootBoneAttachment3D" index="0"]
layers = 524288
mesh = SubResource("SphereMesh_apoih")

[node name="RightFootBoneAttachment3D" type="BoneAttachment3D" parent="Armature/GeneralSkeleton" index="4"]
transform = Transform3D(-1, 1.31531e-05, -1.14195e-05, -1.13368e-05, 6.80983e-06, 1, 1.31521e-05, 1, -6.78003e-06, 0.144255, 0.101341, 0.0326879)
bone_name = "RightFoot"
bone_idx = 63

[node name="MeshInstance3D" type="MeshInstance3D" parent="Armature/GeneralSkeleton/RightFootBoneAttachment3D" index="0"]
layers = 524288
mesh = SubResource("SphereMesh_apoih")

[node name="SpineBoneAttachment3D" type="BoneAttachment3D" parent="Armature/GeneralSkeleton" index="5"]
transform = Transform3D(1, -1.99294e-08, -3.98722e-09, 2.01181e-08, 1, 2.03727e-09, 3.97267e-09, -2.00816e-09, 1, 0.000809157, 1.27965, -0.00378111)
bone_name = "Spine"
bone_idx = 2

[node name="MeshInstance3D" type="MeshInstance3D" parent="Armature/GeneralSkeleton/SpineBoneAttachment3D" index="0"]
layers = 524288
mesh = SubResource("BoxMesh_f2u70")

[node name="HeadBoneAttachment3D" type="BoneAttachment3D" parent="Armature/GeneralSkeleton" index="6"]
transform = Transform3D(1, -1.99294e-08, -3.98721e-09, 2.01181e-08, 1, 2.03727e-09, 3.97266e-09, -2.00816e-09, 1, 0.000809146, 1.92114, 0.0226033)
bone_name = "Head"
bone_idx = 6

[node name="MeshInstance3D" type="MeshInstance3D" parent="Armature/GeneralSkeleton/HeadBoneAttachment3D" index="0"]
layers = 524288
mesh = SubResource("BoxMesh_cjhop")

[node name="LeftLegBoneAttachment3D" type="BoneAttachment3D" parent="Armature/GeneralSkeleton" index="7"]
transform = Transform3D(0.991158, 0.132518, -0.00664619, 0.129052, -0.974452, -0.183815, -0.0308352, 0.181332, -0.982938, -0.130681, 0.504106, -0.0301938)
bone_name = "LeftLowerLeg"
bone_idx = 57

[node name="MeshInstance3D" type="MeshInstance3D" parent="Armature/GeneralSkeleton/LeftLegBoneAttachment3D" index="0"]
layers = 524288
mesh = SubResource("BoxMesh_iulsx")

[node name="RightLegBoneAttachment3D" type="BoneAttachment3D" parent="Armature/GeneralSkeleton" index="8"]
transform = Transform3D(0.991059, -0.133169, 0.00829787, -0.127688, -0.964637, -0.230589, 0.0387118, 0.227468, -0.973016, 0.130019, 0.501043, -0.0475721)
bone_name = "RightLowerLeg"
bone_idx = 62

[node name="MeshInstance3D" type="MeshInstance3D" parent="Armature/GeneralSkeleton/RightLegBoneAttachment3D" index="0"]
layers = 524288
mesh = SubResource("BoxMesh_iulsx")

[node name="LeftHandBoneAttachment3D" type="BoneAttachment3D" parent="Armature/GeneralSkeleton" index="9"]
transform = Transform3D(-0.470414, 0.652821, -0.593747, -0.108415, -0.7105, -0.695296, -0.875761, -0.262706, 0.405004, -0.801045, 1.67191, 0.0172692)
bone_name = "LeftHand"
bone_idx = 11

[node name="MeshInstance3D" type="MeshInstance3D" parent="Armature/GeneralSkeleton/LeftHandBoneAttachment3D" index="0"]
transform = Transform3D(0.931436, -0.21993, 0.289926, 0.35465, 0.72714, -0.587785, -0.0815451, 0.650307, 0.755282, 0, 0, 0)
layers = 524288
mesh = SubResource("BoxMesh_iulsx")

[node name="RightHandBoneAttachment3D" type="BoneAttachment3D" parent="Armature/GeneralSkeleton" index="10"]
transform = Transform3D(-0.482593, -0.649615, 0.587456, 0.0942464, -0.705352, -0.702564, 0.870759, -0.283687, 0.401622, 0.797783, 1.67191, 0.0372552)
bone_name = "RightHand"
bone_idx = 35

[node name="MeshInstance3D" type="MeshInstance3D" parent="Armature/GeneralSkeleton/RightHandBoneAttachment3D" index="0"]
transform = Transform3D(0.931436, 0.21993, -0.289926, -0.35465, 0.72714, -0.587785, 0.0815451, 0.650307, 0.755282, 0, 0, 0)
layers = 524288
mesh = SubResource("BoxMesh_iulsx")

[node name="StateChart" type="Node" parent="." index="2"]
script = ExtResource("5_fxgv1")

[node name="States" type="Node" parent="StateChart" index="0"]
script = ExtResource("6_c1lto")
initial_state = NodePath("Walking")

[node name="Walking" type="Node" parent="StateChart/States" index="0"]
script = ExtResource("7_d2ip8")

[node name="ToStanding" type="Node" parent="StateChart/States/Walking" index="0"]
script = ExtResource("8_deeoo")
to = NodePath("../../Standing")
delay_seconds = 6.2

[node name="Standing" type="Node" parent="StateChart/States" index="1"]
script = ExtResource("7_d2ip8")

[node name="ToWaiting" type="Node" parent="StateChart/States/Standing" index="0"]
script = ExtResource("8_deeoo")
to = NodePath("../../Waiting")
event = &"FightStarted"
delay_seconds = 3.0

[node name="Waiting" type="Node" parent="StateChart/States" index="2"]
script = ExtResource("7_d2ip8")

[node name="ToTransform" type="Node" parent="StateChart/States/Waiting" index="0"]
script = ExtResource("8_deeoo")
to = NodePath("../../Transform")
event = &"PlayerWon"
delay_seconds = 6.0

[node name="ToWalking" type="Node" parent="StateChart/States/Waiting" index="1"]
script = ExtResource("8_deeoo")
to = NodePath("../../Walking")
event = &"GameBegin"

[node name="Transform" type="Node" parent="StateChart/States" index="3"]
script = ExtResource("7_d2ip8")

[node name="ToWalking" type="Node" parent="StateChart/States/Transform" index="0"]
script = ExtResource("8_deeoo")
to = NodePath("../../Walking")
delay_seconds = 6.0

[node name="AnimationPlayer" parent="." index="3"]
root_motion_track = NodePath("%GeneralSkeleton:mixamorig_Root")
playback_default_blend_time = 2.0

[node name="RootMotionView" type="RootMotionView" parent="." index="4"]
animation_path = NodePath("../AnimationPlayer")

[connection signal="state_entered" from="StateChart/States/Walking" to="." method="_on_walking_state_entered"]
[connection signal="state_entered" from="StateChart/States/Standing" to="." method="_on_standing_state_entered"]
[connection signal="state_exited" from="StateChart/States/Standing" to="." method="_on_standing_state_exited"]
[connection signal="state_entered" from="StateChart/States/Waiting" to="." method="_on_waiting_state_entered"]
[connection signal="state_exited" from="StateChart/States/Waiting" to="." method="_on_waiting_state_exited"]
[connection signal="state_entered" from="StateChart/States/Transform" to="." method="_on_transform_state_entered"]

[editable path="Armature/GeneralSkeleton/FlamingOrbBoneAttachment3D/FlamingOrb"]
